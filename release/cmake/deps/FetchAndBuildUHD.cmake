set(UHD_URL https://github.com/EttusResearch/uhd/archive/refs/tags/v4.6.0.0.tar.gz)
set(UHD_HASH 5e6eb05abb4a3973bef8837fb45a5147be04698229e22801369f728fcc6db38d)
set(UHD_INSTALL_DIR ${CMAKE_INSTALL_PREFIX}/uhd)
include(ExternalProject)
ExternalProject_Add(
    gnu-radio-UHD
    URL ${UHD_URL}
    URL_HASH SHA256=${UHD_HASH}
    PREFIX ${CMAKE_BINARY_DIR}/deps
    CMAKE_ARGS -DLIBUSB_INCLUDE_DIRS=${LIBUSB_INCLUDE_DIRS} -DCMAKE_BUILD_TYPE=Release -DLIBUSB_LIBRARIES=${LIBUSB_LIBRARIES} -DCMAKE_PREFIX_PATH=${CMAKE_PREFIX_PATH} -DUHD_RELEASE_MODE=ON -DENABLE_EXAMPLES=OFF -DENABLE_TESTS=OFF -DCMAKE_INSTALL_PREFIX=${UHD_INSTALL_DIR} "-DCMAKE_CXX_FLAGS=-DBOOST_ALL_NO_LIB /EHsc"
    SOURCE_SUBDIR host
)

add_dependencies(gnu-radio-UHD gnu-radio-libusb)


# -DBoost_INCLUDE_DIR=${Boost_INCLUDE_DIR} -DBoost_LIBRARIES=${Boost_LIBRARIES}